```{r,message=FALSE,echo=FALSE}
  # library("knitcitations")
  library("knitr")
  # cite_options(max.names = 3, style = "html", hyperlink = "to.doc")
  # bib <- read.bibtex("bibtexlib.bib")
  opts_chunk$set(tidy = FALSE, message = FALSE, warning = FALSE, cache = TRUE) 
  # use this to set knitr options: 
  # http://yihui.name/knitr/options #chunk_options 
```
---
title: "2: Required Components"
---

This guide is a brief introduction to some of the principles of reproducible
science in R. Before we get started, we should install the necessary components
for this tutorial.

Installing R and RStudio
-----

The first thing you will need in R and RStudio:

1. Download and install the [R](http://www.r-project.org) statistical computing
   and graphing environment. This works cross-platform on Windows, OS X and
   Linux operating systems.

2. Download and install the free, open source edition of the [RStudio
   Desktop](https://www.rstudio.com/products/rstudio/download/) integrated 
   development environment (IDE) that we recommend.

Installing the required packages
----

The following packages are utilized in this primer:

1. [rmarkdown](http://cran.r-project.org/web/packages/knitr/index.html) (creating reports)
1. [agricolae](http://cran.r-project.org/web/packages/poppr/index.html) (agricultural disease data analysis)
1. [ggplot2](http://cran.r-project.org/web/packages/ggplot2/index.html) (graphs)
1. [poppr](http://cran.r-project.org/web/packages/poppr/index.html) (genetic data analysis)
1. [dplyr](http://cran.r-project.org/web/packages/dplyr/index.html) (data manipulation)
1. [tidyr](http://cran.r-project.org/web/packages/tidyr/index.html) (data manipulation)

Open RStudio and copy and paste the following code into the console to install
the packages:

```{r, eval = FALSE}
my_packages <- c("rmarkdown","poppr", "agricolae", "dplyr", "tidyr", "ggplot2")
install.packages(my_packages, repos = "http://cran.rstudio.com", dependencies = TRUE)
```

Congratulations. You should now be all set for using R. To ensure that
everything is set up correctly, you can go through steps 1 and 2 in the
[markdown chapter](Markdown.html).

Optional software
-----------------

### PDFs with $LaTeX$

If you want to create PDF documents, you will need a $\LaTeX$ installation. For OSX users, this is a large download and you will want to ensure you have a good connection:

 - [LaTeX for OSX](https://tug.org/mactex/)
 - [LaTeX for Windows](http://miktex.org/)

### Git

Git is a version control program that we will cover, but since installation
requirements can vary between operating systems, we are not requiring it for the
workshop. However, if you would like to install it, [Here's a website that
covers installation for the major operating
systems](http://happygitwithr.com/install-git.html). 

A quick introduction to R using RStudio
------------------

Let's review some of the basic features and functions of R. To start R,
open the RStudio application from your programs folder or start menu. This will
initialize your R session. To exit R, simply close the RStudio application.

> Note that R is a case sensitive language!

Let's get comfortable with R by submitting the following command on the command
line (where R prompts you with a `>` in the lower left RStudio window pane) that
will retrieve the current working directory on your machine:

```{r, eval=FALSE}
getwd() # this command will print the current working directory
```

> Note that the symbol '#' is used to add comments to your code and you just
> type `getwd()` after the ">".

To get help on any R functions, type a question mark before the empty function
call as in:

```{r, eval=FALSE}
?mlg # open the R documentation of the function mlg()
```

To quit R you can either use the <kbd>RStudio > Quit</kbd> pull-down menu
command or execute <kbd>âŒ˜ + Q</kbd> (OS X) or <kbd>ctrl + Q</kbd> (PC).

Using *magrittr*'s %>%
----------------------

Various chapters throughout this primer will have the symbol `%>%` in the code.
This is called a "pipe" operator and it allows code to be more readable by
stringing together commands from right to left. Here's a [short description of
these "pipes" with cats](http://rforcats.net/#pipes). When reading code, it can
be thought of as equivalent to saying "and then". For example, if you have three
consecutive steps to a process, you would write this in English as:

> Take your data **and then** do step one, **and then** do step two, **and
> then** do step three.

In R code with *magrittr*, assuming that each step is a function, it might be
written as:

```{r, eval = FALSE}
result <- data %>% step_one() %>% step_two() %>% step_three()
```

Below, are two examples of how code can be improved with *magrittr*. [More
details about magrittr can be found in this
link.](http://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html)

#### Consider a fake Example: 
Adapted from 
[Hadley Wickham](https://twitter.com/_inundata/status/557980236130689024). 
Based on the children's song, 
[Little bunny foo foo](http://en.wikipedia.org/wiki/Little_Bunny_Foo_Foo).

```{r, eval = FALSE}
foo_foo <- little_bunny()

bop_on(scoop_up(hop_through(foo_foo, forest), field_mouse), head)

# VS

foo_foo %>%
  hop_through(forest) %>%
  scoop_up(field_mouse) %>%
  bop_on(head)
```

The `%>%` operator is thus good if you have to do a lot of small steps in your
analysis. It allows your code to be more readable and reproducible.


Packages and getting help
-----------------------

One way that R shines above other languages for analysis is the fact that
R packages in CRAN are all documented. Help files are written in HTML and give
the user a brief overview of:

 - the purpose of a function,
 - the parameters it takes,
 - the output it yields,
 - and some examples demonstrating its usage. 

To see all of the help topics in a package, you can simply type:

```{r, eval = FALSE}
help(package = "poppr") # Get help for a package.
help(amova)             # Get help for the amova function.
?amova                  # same as above.
??multilocus            # Search for functions that have the keyword multilocus.
```
Some packages include vignettes that can have different formats such as being
introductions, tutorials, or reference cards in PDF format. You can look at a
list of vignettes in all packages by typing:

```{r, eval=FALSE}
browseVignettes()                     # see vignettes from all packages
browseVignettes(package = 'poppr')    # see vignettes from a specific package.
```

and to look at a specific vignette you can type:

```{r, eval=FALSE}
vignette('mlg')
```

References
----------
