<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/default.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="tutorial.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.9em;
  padding-left: 5px;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
  padding-left: 10px;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Reproducible Science in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="02--Setup.html">Setup</a>
</li>
<li>
  <a href="03--Data_formatting.html">Data formatting</a>
</li>
<li>
  <a href="04--Markdown.html">Markdown</a>
</li>
<li>
  <a href="05--RMarkdown.html">RMarkdown</a>
</li>
<li>
  <a href="06--Git.html">Git and GitHub</a>
</li>
<li>
  <a href="07--Organization.html">Organization</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extra Content
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Extra_content---The_Basics_of_R.html">The Basics of R</a>
    </li>
    <li>
      <a href="Extra_content---Advanced_RMarkdown.html">Advanced RMarkdown</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<div id="data-formatting" class="section level1">
<h1>Data Formatting</h1>
<p>GIGO is an acronym that stands for “Garbage In, Garbage Out”, and this is often a mantra to remember when gathering data. The same goes for entering and storing data in a spreadsheet. Often, the first point of error for any analysis is at the data entry stage. This section will show you the best practices of data storage and why this is important for your analyses, whether you are analyzing disease progress, fungicide resistance, or complex bioinformatic data. Much of this is based off of the Data Carpentry module “<a href="http://www.datacarpentry.org/2015-03-09-ISI-CODATA/lessons/excel/ecology-examples/00-intro.html">Using Spreadsheet Programs for Scientific Data</a>” designed by Christie Bahlai and Aleksandra Pawlik. Please refer to the previous link if you need any more information.</p>
<div id="isnt-excelopenofficegoogle-sheets-good-enough" class="section level2">
<h2>Isn’t Excel/OpenOffice/Google Sheets good enough?</h2>
<p><strong>No</strong> <span class="citation">(Zeeberg et al. 2004)</span>. <img src="images/excel_date_error.jpg" alt="An example of gene names accidentally being converted to dates in Microsoft Excel" class="big_window knit_image knit_border" /></p>
<p>For data entry, Excel is a fantastic program because it’s intuitive to enter data into cells, but Excel also reinforces a lot of bad habits that can make your data inaccessible to analyses down the line.</p>
</div>
<div id="how-should-i-format-my-data" class="section level2">
<h2>How should I format my data?</h2>
<p>It all depends on what your data is, but ultimately there are a few guidelines or best practices to follow:</p>
<ul>
<li>Place all data on one sheet in a contiguous rectangle</li>
<li>One datum per cell</li>
<li>Saved as a <strong><ins>flat text file</ins></strong> (e.g. <code>.csv</code>, <code>.tsv</code>, <code>.txt</code>)</li>
<li>Observations in rows (note: 1 sample ≠ 1 observation)</li>
<li>Variables in columns (e.g. Treatment, Replicate, Response)</li>
<li>Consistent formatting of missing data (use either a blank cell or <code>NA</code>)</li>
<li>NEVER merge cells</li>
</ul>
<p>The rest of this section will show some examples of good and bad data formatting related to plant pathology. For a more detailed insight on data formatting from someone who has A LOT of experience with different data formats, take a look at <a href="http://kbroman.org/dataorg/">Karl Broman’s Data Organization Tutorial</a>. He covers the following topics:</p>
<ul>
<li><a href="http://kbroman.org/dataorg/pages/consistency.html">Be consistent</a></li>
<li><a href="http://kbroman.org/dataorg/pages/dates.html">Write dates as <code>YYYY-MM-DD</code></a></li>
<li><a href="http://kbroman.org/dataorg/pages/no_empty_cells.html">Fill in all of the cells</a></li>
<li><a href="http://kbroman.org/dataorg/pages/one_thing_per_cell.html">Put just one thing in a cell</a></li>
<li><a href="http://kbroman.org/dataorg/pages/rectangle.html">Make it a rectangle</a></li>
<li><a href="http://kbroman.org/dataorg/pages/dictionary.html">Create a data dictionary</a></li>
<li><a href="http://kbroman.org/dataorg/pages/no_calculations.html">No calculations in the raw data files</a></li>
<li><a href="http://kbroman.org/dataorg/pages/no_highlighting.html">Don’t use font color or highlighting as data</a></li>
<li><a href="http://kbroman.org/dataorg/pages/names.html">Choose good names for things</a></li>
<li><a href="http://kbroman.org/dataorg/pages/backups.html">Make backups</a></li>
<li><a href="http://kbroman.org/dataorg/pages/validation.html">Use data validation to avoid data entry mistakes</a></li>
<li><a href="http://kbroman.org/dataorg/pages/csv_files.html">Save the data in plain text files</a></li>
<li><a href="http://kbroman.org/dataorg/pages/avoid.html">Other things to avoid</a></li>
</ul>
</div>
</div>
<div id="same-data-different-formats" class="section level1">
<h1>Same Data, Different Formats</h1>
<p>In the following examples, we will use data from a stripe rust case study provided by APS. <a href="http://www.apsnet.org/edcenter/advanced/topics/EcologyAndEpidemiologyInR/DiseaseProgress/Pages/StripeRust.aspx">Here is the link to the case study.</a></p>
<div id="the-good-following-the-rules-outlined-above" class="section level2">
<h2>The good: Following the rules outlined above</h2>
<p>There are a few flavors of well-formatted data presented here, but they all have the above rules in common and, thus, can all easily be converted to and from each other within R and other computer programs.</p>
<div id="long-data" class="section level4">
<h4>Long data</h4>
<p>Long data is so named because there are typically a vast number of rows, each with a single datum and its associated treatments, creating tables that tend to have more rows than columns.</p>
<div class="figure">
<img src="images/long_data.png" class="knit_border knit_image" />

</div>
</div>
<div id="wide-data" class="section level4">
<h4>Wide data</h4>
<p>Wide data is the opposite: each row has data for all treatments and each treatment is a column. It’s called wide data because the number of columns tends to exceed the number of rows.</p>
<div class="figure">
<img src="images/wide_data.png" class="knit_border knit_image" />

</div>
</div>
<div id="an-appropriate-mixture-of-long-and-wide-data" class="section level4">
<h4>An appropriate mixture of long and wide data</h4>
<p>Of course, recording observations in either long or wide data exclusively is not necessarily intuitive for the person entering the data, so a combination of these can be beneficial. Also, tools exist to convert between long and wide tables so data can be entered however it is most convenient. The example below encodes two columns for data: one for fungicide treated and the other for untreated. The date and cultivar are specified as they are in the long data in the first two fields.</p>
<div class="figure">
<img src="images/two_column_data.png" class="knit_border knit_image" />

</div>
</div>
</div>
<div id="the-bad-storing-data-in-excel-and-using-multiple-sheets" class="section level2">
<h2>The bad: Storing data in excel and using multiple sheets</h2>
<p>Saving data in Excel is a recipe for disaster, <a href="http://ecologybits.com/index.php/2016/07/06/beware-this-scary-thing-excel-can-do-to-your-data/"><strong>especially if you are storing dates</strong></a>.</p>
<div id="multiple-sheets" class="section level4">
<h4>Multiple sheets</h4>
<p>One thing that is commonly done is to store data across multiple sheets. While this may seem to help organize, it prevents you from storing your data in a flat text format and makes it more difficult to read it in to R (although it is possible with the <em>readxl</em> package).</p>
<div class="figure">
<img src="images/two_sheet_data.png" class="knit_border knit_image" />

</div>
</div>
</div>
<div id="the-ugly-multiple-tables-color-coding-etc" class="section level2">
<h2>The ugly: multiple tables, color-coding, etc…</h2>
<p>Ugly data is, well, ugly. At least with bad data, it can be read into R. With ugly data, there is little to no hope of getting it into R without reformatting (and at that point, you might as well convert it into good data :).</p>
<div id="small-multiples" class="section level4">
<h4>Small Multiples</h4>
<p>Separate tables within the spreadsheet with merged cells, numbers and spaces within headers, and inconsistent formatting (different names for columns, zeroes vs blanks).</p>
<div class="figure">
<img src="images/ugly_data.png" class="knit_border knit_image" />

</div>
</div>
</div>
</div>
<div id="resources" class="section level1">
<h1>Resources</h1>
<p>There are a few ways to manage data without the use of Excel or Google Sheets, and one way is to use an editor that specifically works on CSV files. A couple of good examples are:</p>
<ul>
<li><a href="http://comma-chameleon.io/">Comma Chameleon</a></li>
<li><a href="https://github.com/jakob/TableTool#readme">Table Tool</a> (OSX only)</li>
</ul>
<p>These will allow you to enter your data and that’s about it. No bells, whistles, automatic reformatting, or guessing on the editors side, giving you complete control.</p>
</div>
<div id="exercise" class="section level1">
<h1>Try it!</h1>
<hr />
<div id="question-1" class="section level3">
<h3>Question 1</h3>
<p>Take a look at the <a href="http://www.apsnet.org/edcenter/advanced/topics/EcologyAndEpidemiologyInR/DiseaseProgress/Documents/FungicideExample.csv">data set in the Wide Data section above (csv format)</a>. It’s formatted as wide data, but is there anything that could be improved?</p>
</div>
<div id="question-2" class="section level3">
<h3>Question 2</h3>
<p>Examine the following data sets:</p>
<ul>
<li><a href="https://github.com/grunwaldlab/Reproducible-science-in-R/blob/master/bad_data/Fungicide%20Spread%20Sheet%202012.xls?raw=true">Fungicide Data</a> (xls format)</li>
<li><a href="https://github.com/grunwaldlab/Reproducible-science-in-R/blob/master/bad_data/Temperature%20Spreadsheet%202012.xlsx?raw=true">Temperature Data</a> (xlsx format)</li>
</ul>
<p>Answer the following questions:</p>
<ul>
<li>What categories would you put these data in?</li>
<li>What formatting mistakes do you see?</li>
<li>Reformat one of these sheets into a proper format.</li>
</ul>
</div>
</div>
<div id="glossary" class="section level1">
<h1>Glossary</h1>
<p><strong><ins>flat text file</ins></strong>: a text file to hold data in a tabular format, where cells are separated by a common character such as comma or tab. Common formats are csv and tsv.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-zeeberg2004mistaken">
<p>Zeeberg, Barry R, Joseph Riss, David W Kane, Kimberly J Bussey, Edward Uchio, W Marston Linehan, J Carl Barrett, and John N Weinstein. 2004. “Mistaken Identifiers: Gene Name Errors Can Be Introduced Inadvertently When Using Excel in Bioinformatics.” <em>BMC Bioinformatics</em> 5 (1). BioMed Central Ltd: 80. <a href="http://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-5-80" class="uri">http://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-5-80</a>.</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
