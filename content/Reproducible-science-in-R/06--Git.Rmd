---
title: Introduction to git
output:
  html_document:
    toc: true
    css: tutorial.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## What is git?

In technical terms, [git](https://git-scm.com/) is a distributed version control
system that is often used to keep track of software development. In not so 
technical terms, it is a personal archivist/time machine that keeps track of all
the changes you make in a (writing or data analysis) project. Normally, when you
save progress on an analysis, the old version of that analysis is lost. With
git, as you make steps toward completion of the analysis, you continue to
save your progress, but you also tell git to remember itermediate states
by 'committing' to all the changes that have happened.

## Why should I use git?

Git allows you to not only save your work, but to save different versions of
your work through time. Imagine that you were working on writing up an analysis,
but wanted to save a version of your work at the end of the day every day so
that you could go back to it at any time. You would likely have a series of
files that looks like this at the end of three days:

```
audpc_2016-05-25.Rmd
audpc_2016-05-26.Rmd
audpc_2016-05-27.Rmd
```

After three days, it's manageable, but after 20 days, it's difficult to remember
what you did between day 6 and day 7. With git, you only need one file:

```
audpc.Rmd
```

Because you've been recording your progress with git, you not only have access
to all the different versions of your files, but you also have a sensible log of
everything that's been done to the file. Here's what the output of one such `git
log` looks like:

```
commit b8392d0b47528091d4b1a4883d677ed02bdbbe32
Author: Zhian Kamvar <kamvarz@science.oregonstate.edu>
Date:   Wed May 25 14:04:11 2016 -0700

    Make figure for publication

commit e3bb7501bf09d597532007b02a8a4fb5bff8ca15
Author: Zhian Kamvar <kamvarz@science.oregonstate.edu>
Date:   Tue May 24 13:41:48 2016 -0700

    Calculate audpc

commit 8379234d4c70367dc08d52eabddfc02ef67244fe
Author: Zhian Kamvar <kamvarz@science.oregonstate.edu>
Date:   Mon May 23 13:05:05 2016 -0700

    Add field data and packages
```

In this log, you can see three entries on three consecutive days with a message
associated with it (don't worry about the "commit" line, we'll cover that
below). We can see that on Tuesday, data and packages were added, Wednesday, the
AUDPC calculation was performed, and on Thursday, a figure was created.

With git, if a file is deleted or you edited it in a way that makes no sense,
[it's easy to
recover](https://elizabethwickes.com/2016/05/10/how-i-use-github-in-500-words/),
giving you the freedom to try out new things without risk of losing all of your
work.

<!--
- because [branching is cool](http://imgur.com/YG8In8X)
- because [You want to be able to recover your files quickly if they are accidentally deleted](https://elizabethwickes.com/2016/05/10/how-i-use-github-in-500-words/)
- because you want a way to remember your thought process coming up with an analysis
- because you wrote something that makes no sense and just want to go back to a previous version of the project without having to manually delete everything.
-->


# Your first repository

Although git is usually used on the command line and takes some practice to use effectivly,
RStudio has a simple menu that makes it easy to do the most common tasks.
This part will walk you through, in pictures and words, how to create your first
git repository using R and Rstudio.

> It is assumed that you have correctly set up git and Rstudio to talk to each
other. The links at the end of this page are wonderful resources for getting started.

## Step one: telling git that you want a repository

In this step, we are going to create a new R project in a new folder on your
computer and initialize it as a git repository

### git init

First thing's first, you should select **File > New Project...** from the
menubar. When you have done that, this window will appear:

![](images/rstudio-new.png){.small_window .knit_border .knit_image}

Select **New Directory**. If you already had your analyses and data ready, you
would choose "Existing Directory".

Now you should see this window:

![](images/rstudio-empty.png){.small_window .knit_border .knit_image}

Select **Empty Project**. 

Now you see this window:

![](images/rstudio-create.png){.small_window .knit_border .knit_image}

> If you are unable to check the box labeled Create git repository, make sure
that your Rstudio is set up with git.

In the Directory Name box, type "audpc\_analysis". This will put the folder
"audpc\_analysis" inside of your Documents folder. The most important part is to
make sure that the **Create git repository** box is checked.

Hit the button labeled **Create Project**, the Rstudio window will refresh and
you should see this:

![](images/rstudio-gitrepo.png){.big_window .knit_border .knit_image}

Now you have your first git repository! On the upper right hand side, you see
the git pane. In it you see that you have two files:

 - .gitignore 
 - audpc_analysis.Rproj

The file `.gitignore` tells git what it doesn't need to keep track of. By
default, these are things like your .Rhistory and .Rdata files. The file
audpc_analysis.Rproj is the file that tells Rstudio that you are in an R project
and that it should start Rstudio in that folder when you have that project open.

Notice, however that there are two yellow blocks with question marks inside of
them under a column labled "Status". This is letting you know that there are
files there that git sees, but isn't keeping track of. To let git know that we
want to keep track of these files, we need to add them first.

### git add

Click the check boxes under the "Staged" column and the yellow boxes will change
to one green box that says "A" inside:

![](images/rstudio-git-add.png){.small_window .knit_border .knit_image}

This means that you are telling git that you want to add these files to your 
repository. It's important to know that, while you have told git you want to add
them, it wants to know that you are serious about adding these files, so it 
wants you to **commit** to adding these files.

### git commit

You can commit to adding these files by clicking on the **Commit** button in
that pane. When you do, this window will pop up:

![](images/rstudio-commit.png){.med_window .knit_border .knit_image}

Here, you can see what files you will be committing and also the specific parts 
of the file that have changed. Green lines are those that have been added and
red for those that were deleted. We don't see any red here because nothing has
been deleted.

In the upper right, you have a message box. For each commit, you should write a
message as to why you are making that commit. This allows you to look back
through your history and understand why you made the changes you did. Write a
message in the box and then click on the button that says **Commit**. You should
see the following message:

![](images/rstudio-commit-confirm.png){.med_window .knit_border .knit_image}

> Pro Tip! Commit messages should be like email subject lines: short and to the
point. If you want to write more, add a blank line after your message and then
write as much as you want (see below).

Now you have your git repository set up with the basic things needed to work
with git and Rstudio. The next step is to set up your analysis.

## Step 2: adding a new Rmd file and making changes

1. Create a new Rmarkdown file by using the menu item **File > New File > R Markdown**
2. Give it a title like "AUDPC Analysis"
3. Save it in your folder as "AUDPC.Rmd"
4. Delete the demo script
5. Add a section and code chunk loading 'acricolae', 'dplyr', and 'ggplot2'
6. Add a section for the session information.
7. Save the file.
 
Your new file should look like this:

![](images/rstudio-rmd.png){.big_window .knit_border .knit_image}

Now you should **add** and **commit** that file just like you did for the others
before, but add a different commit message: "add AUDPC Rmd file".

When you've done that, add some text explaining what the chunks are doing and
why you are using the specific packages like so:

![](images/rstudio-rmd-add.png){.big_window .knit_border .knit_image}

Notice that, in the above image, the indicator for the file in the git pane is 
now a blue box with an "M" in the middle. This means that you have modified a 
file that git is tracking. **Add** that file by clicking on the check box, hit
the **Commit** button, and then add a commit message saying what you did. Here's
an example:

![](images/rstudio-rmd-commit.png){.med_window .knit_border .knit_image}

Now hit the **Commit** button and then click on the button at the top that says
**History**. You should see the following:

![](images/rstudio-history.png){.med_window .knit_border .knit_image}

This is a history of all the commits that you have made in this repository for
the analysis. You can see when you made changes to the file and reasoning behind
why you made these changes.

# Conclusions

This was not meant to be a comprehensive tutorial on everything related to git,
but it should be enough to get you started. We hope that, after reading this
tutorial, you have the resources you need to keep track of your analyses using
git and explore reproducible research.

The next step is to utilize GitHub so that you can collaborate and store your
git repositories remotely.

# Resources

## Interfaces

Git is primarily a program on the command line, but there are several graphical
user interfaces that are available for it:

- [GitHub Desktop](https://desktop.github.com/)
- [Sourcetree](https://www.atlassian.com/software/sourcetree)
- [Git Kraken](https://www.gitkraken.com/)

## Tutorials

There are often a plethora of tutorials at your fingertips with a simple google 
search of "learn git". As this particular tutorial is only designed to introduce
you to git, we recommend browsing through these and seeing which ones work well
for you.

Here are a few that we've found to be helpful:

- [Try Git (from GitHub)](https://try.github.io/)
- [Happy Git and GitHub for the useR](http://happygitwithr.com/)
- [UBC's STAT 545 page on Git, GitHub, and Rstudio](http://stat545.com/git00_index.html) (This has been field tested with students with varying degrees of computer literacy)
- [Hadely Wickham's take on git](http://r-pkgs.had.co.nz/git.html)
